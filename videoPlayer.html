<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Shaka Player compiled library:
    <script src="node_modules/shaka-player/dist/shaka-player.compiled.js"></script>-->
    <!-- Your application source: 
    <script src="myapp.js"></script>-->
    <link href="node_modules/cloudinary-video-player/dist/cld-video-player.min.css" rel="stylesheet">
    <script src="node_modules/lodash/lodash.js" type="text/javascript"></script>
    <script src="node_modules/cloudinary-core/cloudinary-core.js" type="text/javascript"></script>
    <script src="node_modules/cloudinary-video-player/dist/cld-video-player.min.js" type="text/javascript"></script>

    <title>videoPlayer</title>
</head>

<body>
    <div class="wrapper" id="wrapper" style="display:flex; flex-direction:column; max-width:1440px; position:relative;margin:0 auto;">
        <div class='vidSection' style='display: flex;flex-direction: row; align-items: center; justify-content: space-around;'>
            <div id="webgazerDiv">

            </div>
            <video id="example-player" style="display: flex;flex-direction:column; align-items: center;" width="500" height="280" controls muted autoplay class="cld-video-player cld-fluid" data-cld-colors='{ "base": "#810303bb", "accent": "#E90003", "text": "#FCFAFC" }'
                data-cld-transformation='{ "width": 500, "height": 480 }'></video>

            <video id="example-player-2" style="display: flex;flex-direction:column;align-items: center;" width="500" height="280" controls muted autoplay class="cld-video-player cld-fluid" data-cld-colors='{ "base": "#810303bb", "accent": "#E90003", "text": "#FCFAFC" }'
                data-cld-transformation='{ "width": 500, "height": 480 }'></video>

            <!--<div id="source-data ">
            <span id="public-id-placeholder "></span><br>
            <span id="source-url-placeholder "></span>
        </div>

        <div class="well " id="playlist-data ">
        </div>-->


        </div>
        <button id="play-prev" class="btn btn-default btn-ish">Prev</button>
        <button id="play-next" class="btn btn-default btn-ish">Next</button>

    </div>

    <script>
        var cld = cloudinary.Cloudinary.new({
            cloud_name: 'ishdb'
        });

        // Initialize player
        var player = cld.videoPlayer('example-player');


        // Pass a sorter to sort list in alphabetical order by publicId
        var sorter = function(a, b) {
            if (a.publicId < b.publicId) return Math.random(1);
            if (a.publicId > b.publicId) return Math.random(-1);
            return 0;
        };

        // Fetch playlist by tag. Since this operation involves an API call
        // the function returns a Promise when the operation completes.
        // The return value is 'player '.
        player.playlistByTag('violence', {
            sorter: sorter,
            sourceParams: {
                angle: 0
            },
            autoAdvance: 0,
            repeat: true
        }).then(function(player) {
            var divElem = document.querySelector("div#playlist-data ");
            var list = player.playlist().list().map(function(source) {
                return source.publicId()
            }).join(', ');

            divElem.innerText = "Playlist: " + list
        });

        function updateSource() {
            var divElem = document.querySelector("div#source-data ");

            publicIdElem = divElem.querySelector("#public-id-placeholder ");
            sourceUrlElem = divElem.querySelector("#source-url-placeholder ");

            publicIdElem.innerText = "Public Id: " + player.currentPublicId();
            sourceUrlElem.innerText = "Source URL: " + player.currentSourceUrl();

            divElem.style.display = 'block ';
        }

        player.on('sourcechanged', updateSource);

        document.getElementById("play-prev").addEventListener("click", function() {
            player.playPrevious();
            playerTwo.playPrevious();

        });

        document.querySelector("button#play-next").addEventListener("click ", function() {
            player.playNext();
            playerTwo.playNext();
        });
    </script>
    <script>
        var cld = cloudinary.Cloudinary.new({
            cloud_name: 'ishdb'
        });

        // Initialize player
        var playerTwo = cld.videoPlayer('example-player-2');

        // Pass a sorter to sort list in alphabetical order by publicId
        var sorter = function(a, b) {
            if (a.publicId < b.publicId) return 1;
            if (a.publicId > b.publicId) return -1;
            return 0;
        };

        // Fetch playlist by tag. Since this operation involves an API call
        // the function returns a Promise when the operation completes.
        // The return value is 'player '.
        playerTwo.playlistByTag('sex', {
            sorter: sorter,
            sourceParams: {
                angle: 0
            },
            autoAdvance: 0,
            repeat: true
        }).then(function(playerTwo) {
            var divElem = document.querySelector("div#playlist-data ");
            var list = playerTwo.playlist().list().map(function(source) {
                return source.publicId()
            }).join(', ');

            divElem.innerText = "Playlist: " + list
        });

        function updateSource() {
            var divElem = document.querySelector("div#source-data ");

            publicIdElem = divElem.querySelector("#public-id-placeholder ");
            sourceUrlElem = divElem.querySelector("#source-url-placeholder ");

            publicIdElem.innerText = "Public Id: " + playerTwo.currentPublicId();
            sourceUrlElem.innerText = "Source URL: " + playerTwo.currentSourceUrl();

            divElem.style.display = 'block ';
        }

        player.on('sourcechanged ', updateSource);
    </script>

</body>



</html>